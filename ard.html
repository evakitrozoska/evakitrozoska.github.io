<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MIDI Theremin with Arduino</title>
<style>
    body {
        font-family: monospace;
        background-color: #1e1e1e;
        color: #dcdcdc;
        margin: 0;
        min-height: 100vh;
        overflow-x: hidden;
    }

    /* Topbar for mobile and desktop */
    .topbar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background-color: #2a2a2a;
        padding: 10px 20px;
        position: sticky;
        top: 0;
        z-index: 100;
    }
    .topbar .name {
        color: #8cff00;
        font-size: 1.8rem;
        font-weight: bold;
        transition: font-size 0.3s ease;
    }
    .topbar .back-btn {
        font-size: 0.95rem;
        color: #8cff00;
        text-decoration: none;
        background-color: #3a3a3a;
        padding: 5px 10px;
        border-radius: 6px;
        transition: all 0.3s ease;
    }
    .topbar .back-btn:hover {
        background-color: #8cff00;
        color: #1e1e1e;
    }

    /* Shrink topbar on scroll */
    .topbar.shrink .name {
        font-size: 1.3rem;
    }
    .topbar.shrink {
        padding: 5px 15px;
    }

    /* Main content */
    .main {
        padding: 20px;
        max-width: 900px;
        margin: 0 auto;
    }

    .project-detail h1 {
        font-size: 2rem;
        margin-bottom: 15px;
        color: #8cff00;
    }

    .project-detail h2 {
        font-size: 1.5rem;
        margin: 30px 0 15px;
        color: #8cff00;
    }

    .project-detail .project-img {
        width: 100%;
        height: 300px; /* fixed height */
        border-radius: 8px;
        margin-bottom: 20px;
        position: relative;
        overflow: hidden;
    }

    .project-detail .project-img img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
    }

    .project-detail p {
        line-height: 1.6;
        margin-bottom: 20px;
    }

    /* Code block */
    pre {
        background-color: #2a2a2a;
        padding: 15px;
        border-radius: 6px;
        overflow-x: auto;
        color: #8cff00;
        font-size: 0.9rem;
    }

    /* Tags */
    .tags {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin: 20px 0;
    }
    .tags span {
        background-color: #3a3a3a;
        color: #dcdcdc;
        padding: 6px 12px;
        border-radius: 6px;
        font-size: 0.85rem;
    }

    /* Carousel arrows */
    .carousel-arrow {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(58,58,58,0.8);
        color: #8cff00;
        padding: 6px 10px;
        border-radius: 6px;
        cursor: pointer;
        text-decoration: none;
        font-size: 1.5rem;
        user-select: none;
        z-index: 10;
    }
    .carousel-arrow:hover {
        background: #8cff00;
        color: #1e1e1e;
    }
    #prev-btn {
        left: 10px;
    }
    #next-btn {
        right: 10px;
    }

    @media screen and (max-width: 768px) {
        .topbar .name {
            font-size: 1.5rem;
        }
    }

</style>
</head>
<body>

<!-- Topbar -->
<div class="topbar" id="topbar">
  <span class="name">Projects</span>
  <a href="index.html" class="back-btn">‚Üê Back</a>
</div>

<!-- Main content -->
<div class="main">
    <div class="project-detail">
        <h1>MIDI Theremin with Arduino</h1>

        <!-- Image Carousel -->
        <div class="project-img">
            <img id="carousel-image" src="https://raw.githubusercontent.com/evakitrozoska/evakitrozoska.github.io/main/1.jpeg" 
                 alt="Project Image">
            <a id="prev-btn" class="carousel-arrow">&#10094;</a>
            <a id="next-btn" class="carousel-arrow">&#10095;</a>
        </div>

        <!-- Description -->
        <p>
            This is my first project in microcontrollers. It's a MIDI instrument played in real time: 
            as a <b>theremin</b> and with <b>potentiometer knobs</b>. One hand controls <b>pitch</b>, the other <b>volume</b>. 
            Notes are quantized and you can choose different modes: 
            <i>major, minor, Lydian, Dorian, Mixolydian, Phrygian</i>. Buttons provide extra functions, including recording.
        </p>

        <p>
            A challenge: <i>How do I send MIDI signals from Arduino to a DAW?</i> I used <a href="https://www.tobias-erichsen.de/software/loopmidi.html" target="_blank"><b>LoopMIDI</b></a> 
            for virtual ports and <a href="https://edharmasiri.github.io/hairless-midiserial-with-minimize-to-tray/" target="_blank"><b>Hairless MIDI</b></a> to send signals. 
            DAW: <b>Cubase 12</b>.
        </p>

        <!-- Components -->
        <h2>Components</h2>
        <p>
            Arduino Uno board,<br>
            2x potentiometers,<br>
            LED + resistor,<br>
            4 buttons,<br>
            2x HC-SR04 sensors,<br>
            LED display,<br>
            Breadboard.
        </p>

        <!-- Code -->
        <h2>Code</h2>
        <section id="midi-controller">
            <div class="section">
                <h3>Input handling</h3>
                <p>
                  Reads potentiometers and ultrasonic sensors. Uses <strong>time-of-flight</strong> to map distances to notes/volume. Buttons are debounced.
                </p>
            </div>
            <div class="section">
                <h3>State management</h3>
                <p>
                  Keeps state variables for current/previous note, active scale, input mode. Scales are stored in a <strong>LUT</strong> for fast mapping.
                </p>
            </div>
            <div class="section">
                <h3>MIDI output & feedback</h3>
                <p>
                  Sends <strong>MIDI note-on/off</strong>. LED indicates recording.
                </p>
            </div>
            <div class="section">
                <h3>Timing & loop</h3>
                <p>
                  Main loop updates inputs at intervals for smooth response and debouncing.
                </p>
            </div>
        </section>

        <!-- Tags -->
        <div class="tags">
            <span>Arduino</span>
            <span>MIDI</span>
            <span>Electronics</span>
            <span>Embedded Systems</span>
        </div>

        <!-- Future Improvements -->
        <h2>Future Improvements / Tips</h2>
        <p>
            Use higher-precision sensors. HC-SR04 sensors were not very accurate for fine gestures. Better ultrasonic or optical sensors improve responsiveness and playability.
        </p>
    </div>
</div>

<script>
    // Shrink topbar on scroll
    const topbar = document.getElementById('topbar');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 20) {
        topbar.classList.add('shrink');
      } else {
        topbar.classList.remove('shrink');
      }
    });

    // Carousel
    const images = [
      "https://raw.githubusercontent.com/evakitrozoska/evakitrozoska.github.io/main/9.png",
      "https://raw.githubusercontent.com/evakitrozoska/evakitrozoska.github.io/main/8.png",
      "https://raw.githubusercontent.com/evakitrozoska/evakitrozoska.github.io/main/10.png",
        "https://raw.githubusercontent.com/evakitrozoska/evakitrozoska.github.io/main/7.png"
    ];
    let currentIndex = 0;
    const imgElement = document.getElementById("carousel-image");
    document.getElementById("prev-btn").onclick = () => {
      currentIndex = (currentIndex - 1 + images.length) % images.length;
      imgElement.src = images[currentIndex];
    };
    document.getElementById("next-btn").onclick = () => {
      currentIndex = (currentIndex + 1) % images.length;
      imgElement.src = images[currentIndex];
    };
</script>
</body>
</html>

